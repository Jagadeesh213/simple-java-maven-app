node {

stage (‘Prepare environment’) {

git branch: ‘development’, url: ‘https://github.com/Jagadeesh213/simple-java-maven-app.git’

sh ‘npm install’

}

stage (‘Code analyse’) {

sh ‘echo “Run some lints”’

}

stage (‘Unit test’) {

sh ‘echo “Tests will back”’

}

stage (‘Build’) {

sh ‘npm run clean’

sh ‘npm run build’

}

}

stage('Deploy') {
  agent any
  steps {
    sh 'mv sample/webapp/target/webapp.war webapp.war'
    sshPublisher(
      continueOnError: false, 
      failOnError: true,
      publishers: [
        sshPublisherDesc(
          configName: "my-ssh-connection",
          transfers: [sshTransfer(sourceFiles: 'webapp.war')],
          verbose: true
        )
      ]
    )
  }
}
